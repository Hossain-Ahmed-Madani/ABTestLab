var e;e=setInterval((function(){if(document.head){clearInterval(e);var t=document.createElement("style");t.innerHTML=".AB-ECX-136 .last-minute__date-select {\n  display: none;\n}\n.AB-ECX-136 .ab-hidden {\n  display: none !important;\n}\n.AB-ECX-136 .ab-last-minute {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-bottom: 24px;\n  border-bottom: 1px solid #d5d5d5;\n  gap: 20px;\n}\n.AB-ECX-136 .ab-last-minute__button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #000;\n  width: 24px;\n  height: 24px;\n  border: none;\n  background-color: rgba(0, 0, 0, 0);\n  border-radius: 4px;\n  z-index: 10;\n}\n.AB-ECX-136 .ab-last-minute__button--disabled {\n  opacity: 0.4;\n  pointer-events: none;\n}\n.AB-ECX-136 .ab-last-minute__button-icon {\n  font-size: 24px;\n}\n.AB-ECX-136 .ab-last-minute__date-heading {\n  width: 175px;\n  font-size: 16px;\n  line-height: 24px;\n  font-weight: 700;\n  color: #000;\n  margin: 0;\n  text-align: center;\n}\n",document.head.appendChild(t),setTimeout((()=>{clearInterval(e)}),5e3)}}),100),(()=>{const e="AB-ECX-136";function t(e,n,o=1e4,i=100){try{if(o<=0)throw new Error(`Timeout reached while waiting for condition: ${e.toString()}`);e&&e()?n():setTimeout((()=>{t(e,n,o-i,i)}),i)}catch(e){return void console.warn(e)}}function n(){const e=document.querySelector("#last-minute-day-select").value;document.querySelectorAll(`.sp-table__cell.last-minute__day-col[data-date='${e}']`).forEach((e=>{const t=e.parentNode;"-"===e.querySelector("div").innerText?t.classList.add("ab-hidden"):t.classList.remove("ab-hidden")}))}function o(){const e=document.querySelector("#last-minute-day-select");function t(){return document.querySelector(`#last-minute-day-select option[value='${e.value}']`)}function n(t){document.querySelectorAll("#last-minute-day-select option").forEach((e=>e.removeAttribute("selected"))),e.value=t.value,e.selectedIndex=t.index,t.setAttribute("selected","selected");const n=new Event("change",{bubbles:!0});e.dispatchEvent(n)}return{selectElement:e,getCurrentOptionElement:t,getCurrentOptionIndex:function(){return e.selectedIndex},getTotalOptions:function(){return e.options.length},dispatchOnchangeEvent:n,selectPreviousDate:function(){const e=t();e.previousElementSibling&&n(e.previousElementSibling)},selectNextDate:function(){const e=t();e.nextElementSibling&&n(e.nextElementSibling)},selectSecondDate:function(){n(document.querySelector("#last-minute-day-select option:nth-child(2)"))}}}t((function(){return!!(window.location.href.includes("whats-on/last-minute/")&&document.querySelector(`body:not(.${e}):not(${e}--v1)`)&&document.querySelector(".last-minute__date-select #last-minute-day-select")&&document.querySelector(".sp-table__row.last-minute__table-row"))}),(function(){document.body.classList.add(e,`${e}--v1`,`${e}--version-0.0002`),function(){const e=document.querySelector("#last-minute-day-select");document.querySelector(".last-minute__date-select").insertAdjacentHTML("afterend",`\n        <div class="ab-last-minute">\n          <button\n            class="ab-last-minute__button ab-last-minute__button--disabled"\n          >\n            <span\n              class="ab-last-minute__button-icon sp-icon sp-icon-chevron-left"\n            ></span>\n          </button>\n          <div\n            class="ab-last-minute__date-heading"\n            value="${e.value}"\n          >\n            ${e.querySelector("option[selected]").innerText}\n          </div>\n          <button class="ab-last-minute__button">\n            <span\n              class="ab-last-minute__button-icon sp-icon sp-icon-chevron-right"\n            ></span>\n          </button>\n        </div>\n      `)}(),function(){const{selectNextDate:e,selectPreviousDate:t}=o();document.querySelectorAll(".ab-last-minute__button").forEach((n=>{const o=n.querySelector(".sp-icon-chevron-left")?"prev":"next";n.addEventListener("click",(n=>{"prev"===o?t():"next"===o&&e()}))}))}(),n(),function(){const{selectElement:e}=o();e.addEventListener("change",(e=>{n(),console.log("Trigger Goal: ECX-136: Last Minute - Change Date | JS"),window._conv_q=window._conv_q||[],_conv_q.push(["triggerConversion","1004103971"]),function(){const{getCurrentOptionElement:e,getTotalOptions:t,getCurrentOptionIndex:n}=o(),i=document.querySelector(".ab-last-minute__date-heading");i.innerText=e().innerText,i.setAttribute("value",e().value),document.querySelectorAll(".ab-last-minute__button").forEach((e=>{e.classList.remove("ab-last-minute__button--disabled"),(0===n()&&e.querySelector(".sp-icon-chevron-left")||n()===t()-1&&e.querySelector(".sp-icon-chevron-right"))&&e.classList.add("ab-last-minute__button--disabled")}))}()}))}(),t((()=>"complete"===document.readyState),(()=>{const e=function(){const{hour:e,timeString:t}=function(){const e=new Intl.DateTimeFormat("en-GB",{timeZone:"Europe/London",hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(new Date),t=Object.fromEntries(e.map((({type:e,value:t})=>[e,t])));return{hour:parseInt(t.hour,10),timeString:`${t.hour}:${t.minute}:${t.second}`}}();return{isBetween:e>=19&&e<=23,londonTimeString:t}}(),{selectSecondDate:t}=o();e.isBetween&&t()}))}))})();
