(async()=>{const n={client:"SeatPlan",project:"SeatPlan",host:"https://seatplan.com",test_name:"All | City, Production and Venue Pages | City Nav Change",page_initials:"AB-ECX-162-CITY-NAV",test_variation:1,test_version:3e-4},{host:t,page_initials:e,test_variation:a,test_version:i}=n,s=[{title:"Musicals",link:"whats-on/musicals/"},{title:"Plays",link:"whats-on/plays/"},{title:"Christmas",link:"whats-on/christmas/"},{title:"Kids",link:"whats-on/kids/"},{title:"Opera",link:"whats-on/opera/"}];function o(n,t){return t?n.querySelector(t):document.querySelector(n)}function l(){const n=function(){const n=window?.dataLayer.find((n=>"page_view"===n?.eventName&&n?.eventPayload?.content_city));return n?.eventPayload?.content_city.toLowerCase().replace(" ","-")||null}();n&&(o(".city-nav__list").insertAdjacentHTML("beforeend",`\n                <li class="city-nav__item"><a class="city-nav__link" href="${t}/${n}/venues/" data-js="city-nav-city-link">Theatres</a></li>\n                <li class="city-nav__item"><a class="city-nav__link" href="${t}/${n}/news/" data-js="city-nav-city-link">News</a></li>\n            `),function(){const n=/^https?:\/\/(?:www\.)?seatplan\.com\/(london|new\-york)(?:\/(?:whats-on(?:\/.*)?)?)?(?:[?#].*)?$/i;try{return n.test(window.location.href)}catch(n){return!1}}()&&o(".city-nav").insertAdjacentHTML("afterend",`\n                <div class="ab-sub-nav">\n                    <div class="ab-sub-nav__container container">\n                        <ul class="ab-sub-nav__list ${"london"!==n?"ab-sub-nav__list--align-center":""}">\n                            ${s.map((({title:e,link:a})=>"london"!==n&&(a.includes("christmas")||a.includes("opera"))?"":`\n                                    <li class="ab-sub-nav__item">\n                                        <a class="ab-sub-nav__link" href="${t}/${n}/${a}">${e}</a>\n                                    </li>\n                                `)).join("")}\n                        </ul>\n                    </div>\n                </div>\n            `))}try{return await async function(n,t=2e4,e=150){const a=Date.now();return new Promise(((i,s)=>{if("function"==typeof n&&n())return i(!0);const o=setInterval((()=>Date.now()-a>=t?(clearInterval(o),s(new Error(`Timeout of ${t}ms reached while waiting for condition: ${n.toString()}`))):"function"==typeof n&&n()?(clearInterval(o),i(!0)):void 0),e)}))}((function(){return!!(window?.dataLayer.some((n=>"page_view"===n?.eventName&&n?.eventPayload?.content_city))&&o(`body:not(.${e}):not(${e}--v${a})`)&&o(".city-nav"))})),o("body").classList.add(e,`${e}--v${a}`,`${e}--version:${i}`),console.table(n),l(),!0}catch(n){return console.warn(n),!1}})();
