(async()=>{const n={client:"SeatPlan",project:"SeatPlan",site_url:"https://seatplan.com/",test_name:"All | City, Production and Venue Pages | City Nav Change",page_initials:"AB-ECX-162-CITY-NAV",test_variation:1,test_version:1e-4},{page_initials:t,test_variation:e,test_version:a}=n,i=[{title:"Musicals",link:"whats-on/musicals/"},{title:"Plays",link:"whats-on/plays/"},{title:"Christmas",link:"whats-on/christmas/"},{title:"Kids",link:"whats-on/kids/"},{title:"Opera",link:"whats-on/opera/"}];function s(n,t){return t?n.querySelector(t):document.querySelector(n)}function l(){const n=function(){const n=window?.dataLayer.find((n=>"page_view"===n?.eventName&&n?.eventPayload?.content_city));return n?.eventPayload?.content_city.toLowerCase().replace(" ","-")||null}(),t="https://seatplan.com";n&&(s(".city-nav__list").insertAdjacentHTML("beforeend",`\n                <li class="city-nav__item"><a class="city-nav__link" href="${t}/${n}/venues/" data-js="city-nav-city-link">Theatres</a></li>\n                <li class="city-nav__item"><a class="city-nav__link" href="${t}/${n}/news/" data-js="city-nav-city-link">News</a></li>\n            `),console.log("City detected:",n),s(".city-nav").insertAdjacentHTML("afterend",`\n                <div class="ab-sub-nav">\n                    <div class="ab-sub-nav__container container">\n                        <ul class="ab-sub-nav__list ${"london"!==n?"ab-sub-nav__list--align-center":""}">\n                            ${i.map((({title:e,link:a})=>"london"!==n&&(a.includes("christmas")||a.includes("opera"))?"":`\n                                    <li class="ab-sub-nav__item">\n                                        <a class="ab-sub-nav__link" href="${t}/${n}/${a}">${e}</a>\n                                    </li>\n                                `)).join("")}\n                        </ul>\n                    </div>\n                </div>\n            `))}try{await async function(n,t=2e4,e=150){const a=Date.now();return new Promise(((i,s)=>{if("function"==typeof n&&n())return i(!0);const l=setInterval((()=>Date.now()-a>=t?(clearInterval(l),s(new Error(`Timeout of ${t}ms reached while waiting for condition: ${n.toString()}`))):"function"==typeof n&&n()?(clearInterval(l),i(!0)):void 0),e)}))}((function(){return!!(window?.dataLayer.some((n=>"page_view"===n?.eventName&&n?.eventPayload?.content_city))&&s(`body:not(.${t}):not(${t}--v${e})`)&&s(".city-nav"))})),s("body").classList.add(t,`${t}--v${e}`,`${t}--version:${a}`),console.table(n),l()}catch(n){return console.warn(n),!1}})();
