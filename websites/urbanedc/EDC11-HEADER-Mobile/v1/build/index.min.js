var e;e="fired",console.log("%cAcadia%cEDC11-V1","color: white; background: rgb(0, 0, 57); font-weight: 700; padding: 2px 4px; border-radius: 2px;","margin-left: 8px; color: white; background: rgb(0, 57, 57); font-weight: 700; padding: 2px 4px; border-radius: 2px;",e),(async()=>{const e={client:"Acadia",project:"urbanedc",host:"https://urbanedc.com",test_name:"EDC11: [HEADER - Mobile] Add Search Into Header with Panel - (2) SET UP TEST",page_initials:"AB-EDC11",test_variation:2,test_version:4e-4},{host:t,page_initials:s,test_variation:a,test_version:r}=e,o='<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path\n                d="M0.649 11.5647L0 10.9157L5.13333 5.78233L0 0.649L0.649 0L5.78233 5.13333L10.9157 0L11.5647 0.649L6.43133 5.78233L11.5647 10.9157L10.9157 11.5647L5.78233 6.43133L0.649 11.5647Z"\n                fill="black"\n            />\n        </svg> ',i='<svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path\n                d="M12.5001 12.5001L9.6048 9.6048M9.6048 9.6048C10.1001 9.10955 10.4929 8.52159 10.761 7.8745C11.029 7.22742 11.1669 6.53387 11.1669 5.83347C11.1669 5.13307 11.029 4.43953 10.761 3.79244C10.4929 3.14535 10.1001 2.5574 9.6048 2.06214C9.10955 1.56688 8.52159 1.17402 7.8745 0.905986C7.22742 0.637954 6.53387 0.5 5.83347 0.5C5.13307 0.5 4.43953 0.637954 3.79244 0.905986C3.14535 1.17402 2.5574 1.56688 2.06214 2.06214C1.06192 3.06236 0.5 4.41895 0.5 5.83347C0.5 7.248 1.06192 8.60458 2.06214 9.6048C3.06236 10.605 4.41895 11.1669 5.83347 11.1669C7.248 11.1669 8.60458 10.605 9.6048 9.6048Z"\n                stroke="black"\n                stroke-linecap="round"\n                stroke-linejoin="round"\n            />\n        </svg> ',c={featured_collections:[{title:"Knife",link:"https://urbanedc.com/collections/in-stock-knives"},{title:"Patch",link:"https://urbanedc.com/collections/urban-edc-ranger-eye-patches"},{title:"Fidget",link:"https://urbanedc.com/collections/in-stock-games"},{title:"Multitool",link:"https://urbanedc.com/collections/in-stock-keychains-multitools"},{title:"Flashlight",link:"https://urbanedc.com/collections/in-stock-flashlights"},{title:"Lanyard",link:"https://urbanedc.com/collections/in-stock-lanyard-beads"}]};function n(e,t=""){console.log("GA4 Event Fired:",e,t),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"GA4event","ga4-event-name":"cro_event","ga4-event-p1-name":"event_category","ga4-event-p1-value":e,"ga4-event-p2-name":"event_label","ga4-event-p2-value":t})}async function l(){const e=u(await async function(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status}`);const s=await t.text();return(new DOMParser).parseFromString(s,"text/html")}catch(e){return null}}(t),"section").find((e=>u(e,"h2.font-heading.text-heading-standard.break-words").some((e=>e.innerText.includes("This Week's Gear Drop:")))));return u(e,"ul.carousel-track.flex.overflow-x-scroll.scroll-smooth.gap-media-grid.items-start.snap-x.snap-mandatory.snap-always.relative li").map((e=>({title:_(e,".break-words")?.innerText?.trim(),link:_(e,"a").getAttribute("href"),imgUrl:_(e,"img.tile-media").getAttribute("src")})))}async function d(e,t=2e4,s=150){const a=Date.now();return new Promise(((r,o)=>{if("function"==typeof e&&e())return r(!0);const i=setInterval((()=>Date.now()-a>=t?(clearInterval(i),o(new Error(`Timeout of ${t}ms reached while waiting for condition: ${e.toString()}`))):"function"==typeof e&&e()?(clearInterval(i),r(!0)):void 0),s)}))}function _(e,t){return t?e.querySelector(t):document.querySelector(e)}function u(e,t){return t?[...e.querySelectorAll(t)]:[...document.querySelectorAll(e)]}function v(e,t,s){e&&(t.includes(".")&&t.replace(".",""),e.classList.add(t),setTimeout((()=>e.classList.remove(t)),s))}function m(e){e.target!==document.body&&!document.body.contains(e.target)||e.target.closest(".AB-EDC11__modal__gear-drop-items")||e.target.closest(`.${s}__modal__predictive-search-results`)||e.preventDefault()}function p(e="show"){const t=`${s}--modal-show`,a=document.body,r=_(`.${s}__modal`);"show"!==e||a.classList.contains(t)||(v(r,"slide-bottom",200),r.classList.add("slide-bottom"),a.classList.add(t),document.addEventListener("touchmove",m,{passive:!1})),"hide"===e&&(v(r,"slide-top",200),setTimeout((()=>a.classList.remove(t)),200),document.removeEventListener("touchmove",m))}const h="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?"touchend":"click";function f(e){e.preventDefault();const t=_("input#ab-search[type='search']").value.replace(" ","+");window.location.href=`/search?q=${t}`}const g=[{selector:`.${s}__modal__show-cta`,event:h,callback:e=>{e.preventDefault(),e.stopPropagation(),p("show"),n("EDC11_ClickedSearch")}},{selector:`.${s}__modal__close-cta`,event:h,callback:e=>p("hide")},{selector:`.${s}__modal-backdrop`,event:"click",callback:e=>{e.target.closest(`.${s}__modal`)||p("hide")}},{selector:`form.${s}__modal__search`,event:"submit",callback:f},{selector:`.${s}__modal__search-cta`,event:h,callback:f},{selector:'input#ab-search[type="search"]',event:"input",callback:async e=>{const t=e.target.value;t?_(`.${s}__modal__container`).classList.add("show-predictive-search-results"):_(`.${s}__modal__container`).classList.remove("show-predictive-search-results"),console.log("value",t);const a=_('.predictive-search-form  input[type="search"][name="q"]');a.value=t,a.dispatchEvent(new Event("input",{bubbles:!0}));let r=0;await d((()=>_(`.${s}__modal__predictive-search-results div[x-ref="productsResults"]`)&&_(`.${s}__modal__predictive-search-results div[x-ref="collectionsResults"]`)&&++r>=5),5e3,200),_(`.${s}__modal__predictive-search-results #predictive-search-results-group-products`)&&(_(`.${s}__modal__predictive-search-results #predictive-search-results-group-products`).checked=!0),_(`.${s}__modal__predictive-search-results div[x-ref="productsResults"]`).removeAttribute("hidden"),_(`.${s}__modal__predictive-search-results div[x-ref="collectionsResults"]`).setAttribute("hidden","")}},{selector:'.predictive-search-form  input[type="search"][name="q"]',event:"input",callback:async e=>{e.target.value?_(".predictive-search-form").classList.add("show-predictive-search-results"):_(".predictive-search-form").classList.remove("show-predictive-search-results")}},{selector:`.${s}__modal__predictive-search-results`,event:h,callback:e=>{e.target.closest('label[for="predictive-search-results-group-products"]')&&(_(`.${s}__modal__predictive-search-results div[x-ref="productsResults"]`).removeAttribute("hidden"),_(`.${s}__modal__predictive-search-results div[x-ref="collectionsResults"]`).setAttribute("hidden","")),e.target.closest('label[for="predictive-search-results-group-collections"]')&&(_(`.${s}__modal__predictive-search-results div[x-ref="collectionsResults"]`).removeAttribute("hidden",""),_(`.${s}__modal__predictive-search-results div[x-ref="productsResults"]`).setAttribute("hidden",""))}},{selector:".predictive-search-form",event:h,callback:e=>{e.target.closest('label[for="predictive-search-results-group-products"]')&&(_(".predictive-search-form #predictive-search-results-group-products").checked=!0,_('.predictive-search-form div[x-ref="productsResults"]').removeAttribute("hidden"),_('.predictive-search-form div[x-ref="collectionsResults"]').setAttribute("hidden","")),e.target.closest('label[for="predictive-search-results-group-collections"]')&&(_(".predictive-search-form #predictive-search-results-group-collections").checked=!0,_('.predictive-search-form div[x-ref="collectionsResults"]').removeAttribute("hidden",""),_('.predictive-search-form div[x-ref="productsResults"]').setAttribute("hidden",""))}},{selector:'form[action="/search"] input[type="search"]',event:h,callback:()=>n("EDC11_ClickedSearch")},{selector:'button[type="button"].uppercase.js-enabled.block.lg\\:hidden',event:h,callback:()=>n("EDC11_ClickedSearch")},{selector:`a.${s}__modal__gear-drop-item, .${s}__modal__featured-item`,event:"click",callback:e=>{const t=e.currentTarget;e.preventDefault(),n("EDC11_ClickedCategory",t.innerText),setTimeout((()=>window.location.href=t.getAttribute("href")),150)}},{selector:`div.${s}__modal__gear-drop-item`,event:"click",callback:e=>{const t=e.currentTarget,s=t.getAttribute("href");window.AB_EDC11_isDragging||(n("EDC11_ClickedCategory",t.innerText),setTimeout((()=>window.location.href=s),150))}}];try{await d((function(){return!!(_(`body:not(.${s}):not(${s}--v${a})`)&&_(".row-start-1.lg\\:col-span-item.lg\\:col-end-\\[-1\\]")&&_("#DrawerMenu form[action='/search'] button[aria-label='Search']")&&_(".predictive-search-form")&&_("div[x-ref='resultsSlot']"))})),_("body").classList.add(s,`${s}--v${a}`,`${s}--version:${r}`),console.table(e),async function(){const e=await l();_(".row-start-1.lg\\:col-span-item.lg\\:col-end-\\[-1\\] > .flex.flex-wrap.justify-end.items-top.gap-5").insertAdjacentHTML("afterbegin",`<div class="${s}__modal__show-cta uppercase js-enabled block lg:hidden" type="button">Search</div>`),_("body").insertAdjacentHTML("afterbegin",`\n                <div class="${s}__modal-layout">\n                    <div class="${s}__modal-backdrop"></div>\n                    <div class="${s}__modal">\n                        <div class="${s}__modal__container">\n                            <div class="${s}__modal__top">\n                                <form action="/search" method="get" role="search" class="${s}__modal__search">\n                                    <button class="${s}__modal__search-cta" type="submit">${i}</button>\n                                    <input id="ab-search" type="search" class="${s}__modal__search-input" placeholder="Search" autocomplete="off" />\n                                </form>\n                                <button class="${s}__modal__close-cta" type="button">${o}</button>\n                            </div>\n                            <div class="${s}__modal__gear-drop-container">\n                                <div class="${s}__modal__gear-drop-title">This Week's Gear Drop</div>\n                                <div class="${s}__modal__gear-drop-items">\n                                    ${e.map((({title:e,link:a,imgUrl:r})=>`\n                                                <a href="${t+a}" class="${s}__modal__gear-drop-item">\n                                                    <span class="${s}__modal__gear-drop-item-img"><img src="${r}" alt="${e}" /></span>\n                                                    <span class="${s}__modal__gear-drop-item-title">${e}</span>\n                                                </a>\n                                            `)).join("")}\n                                </div>\n                            </div>\n                            <div class="${s}__modal__featured-collections-container">\n                                <div class="${s}__modal__featured-collections-title">Featured Collections</div>\n                                <div class="${s}__modal__featured-collections">\n                                    ${c.featured_collections.map((({title:e,link:t})=>`<a href="${t}" class="${s}__modal__featured-item"> ${e} </a>`)).join("")}\n                                </div>\n                            </div>\n                            <div class="${s}__modal__predictive-search-results"></div>\n                        </div>\n                    </div>\n                </div>\n            `),_("div[x-ref='resultsSlot']").insertAdjacentHTML("beforebegin",`\n                <div class="${s}__modal__container">\n                    <div class="${s}__modal__gear-drop-container">\n                        <div class="${s}__modal__gear-drop-title">This Week's Gear Drop</div>\n                        <div class="${s}__modal__gear-drop-items--carousel">\n                            <div class="${s}__modal__gear-drop-items--carousel-inner">\n                                ${e.map((({title:e,link:a,imgUrl:r})=>`\n                                            <div href="${t+a}" class="${s}__modal__gear-drop-item">\n                                                <span class="${s}__modal__gear-drop-item-img"><img src="${r}" alt="${e}" /></span>\n                                                <span class="${s}__modal__gear-drop-item-title">${e}</span>\n                                            </div>\n                                        `)).join("")}\n                            </div>\n                        </div>\n                    </div>\n                    <div class="${s}__modal__featured-collections-container">\n                        <div class="${s}__modal__featured-collections-title">Featured Collections</div>\n                        <div class="${s}__modal__featured-collections">\n                            ${c.featured_collections.map((({title:e,link:t})=>`<a href="${t}" class="${s}__modal__featured-item"> ${e} </a>`)).join("")}\n                        </div>\n                    </div>\n                </div>\n            `)}(),g.forEach((async({selector:e,event:t,callback:s})=>{const a=`ab-${t}-event-attached`;await d((()=>u(e).length>0),5e3,200),u(e).forEach((e=>{e.classList.contains(a)||(e.classList.add(a),e.addEventListener(t,s))}))})),async function(){await d((()=>_(`.${s}__modal__gear-drop-items--carousel`)),5e3,200);const e=_(`.${s}__modal__gear-drop-items--carousel`);if(!e)return;let t,a,r,o,i=!1,c=0;window.AB_EDC11_isDragging=!1;const n=()=>{i&&(i=!1,e.classList.remove("active"),l(),setTimeout((()=>{window.AB_EDC11_isDragging=!1}),100))},l=()=>{u(),o=requestAnimationFrame(v)},u=()=>{o&&(cancelAnimationFrame(o),o=null)},v=()=>{e.scrollLeft+=c,c*=.92,Math.abs(c)>.5&&(o=requestAnimationFrame(v))};e.addEventListener("mousedown",(s=>{i=!0,e.classList.add("active"),t=s.pageX-e.offsetLeft,r=t,a=e.scrollLeft,c=0,u()})),e.addEventListener("mouseleave",n),document.addEventListener("mouseup",n),e.addEventListener("mousemove",(s=>{if(!i)return;s.preventDefault();const o=s.pageX-e.offsetLeft,n=2*(o-t);Math.abs(n)>5&&(window.AB_EDC11_isDragging=!0),e.scrollLeft=a-n,c=2*(r-o),r=o}));let m=0,p=0,h=0,f=0;e.addEventListener("touchstart",(t=>{m=t.touches[0].pageX-e.offsetLeft,h=m,p=e.scrollLeft,f=0,u()})),e.addEventListener("touchmove",(t=>{const s=t.touches[0].pageX-e.offsetLeft,a=2*(s-m);Math.abs(a)>5&&(window.AB_EDC11_isDragging=!0),e.scrollLeft=p-a,f=2*(h-s),h=s})),e.addEventListener("touchend",(()=>{c=f,l(),setTimeout((()=>{window.AB_EDC11_isDragging=!1}),100)}))}(),async function(){await d((()=>_(`.${s}__modal__predictive-search-results`)),5e3,200);const e=_(".predictive-search-form"),t=debounce((()=>{_(".predictive-search-form  div[x-ref='resultsSlot']")&&(_(`.${s}__modal__predictive-search-results`).innerHTML=_(".predictive-search-form  div[x-ref='resultsSlot']").outerHTML)}),250);new MutationObserver(t).observe(e,{childList:!0,subtree:!0,attributes:!0})}()}catch(e){return console.warn(e),!1}})();
