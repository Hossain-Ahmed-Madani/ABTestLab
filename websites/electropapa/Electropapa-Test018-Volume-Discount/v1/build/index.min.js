(()=>{const t={client:"Netzproduzenten",project:"Project Name",site_url:"https://electropapa.com/de",test_name:"Test018 A/B/C - Followup016 - PDS & Side Cart - Volume discount",page_initials:"AB-TEST-018",test_variation:1,test_version:6e-4},{page_initials:e,test_variation:n,test_version:o}=t,a=[e,`${e}--v${n}`,`${e}--version-${o}`];function c(t,e,n=2e4,o=150){n<=0?console.warn(`Timeout reached while waiting for condition: ${t.toString()}`):t&&t()?e():setTimeout((()=>c(t,e,n-o,o)),o)}function i(t,e){return e?t.querySelector(e):document.querySelector(t)}function r(t,e){return e?[...t.querySelectorAll(e)]:[...document.querySelectorAll(t)]}function l(t,e,n){c((()=>i(t)),(()=>{const o=i(t),a=new MutationObserver(e);return a.observe(o,n),a}))}function s(t,e=!1){const n=new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(t);return e?n.replaceAll(" ",""):n}function u(t){const e=function(t){return t?parseFloat(t.innerText?.replace(".","")?.replace(",",".")?.replace("€","")):0}(i(t,".line-item-total-price-value")),n=+i(t,"input.quantity-selector-group-input")?.value||0,o=function(t,e){const n=[0,0,5,5,6,6,8,8,8,8,10];return t/(1-(e<=10?n[e]:n[10])/100)}(e,n);return{totalPrice:o,offerPrice:e,discount:o-e,quantity:n}}function d(t){const{quantity:e}=u(t),n=`\n            <div class="ab-celebration-message-container ${e<=1?"ab-celebration-message-container--viewing-for-single":""}">${function(t){const{discount:e,quantity:n}=u(t),o=`Glückwunsch! Du sparst ${s(e,!0)} durch unseren Mengenrabatt.`;return n<=1?"":o}(t)}</div>\n        `;setTimeout((()=>{var o,a;i(t,".ab-celebration-message-container")||(t.insertAdjacentHTML("beforeend",n),e>1&&(o="Shows Celebration Message | JS",a=1004106272,console.log("Triggered convert goal: ",o,a),window._conv_q=window._conv_q||[],_conv_q.push(["triggerConversion",a])))}),0)}function p(){const t=".offcanvas-cart-items .line-item";c((()=>r(t).length>0),(()=>{r(t).forEach((t=>{!function(t){const{totalPrice:e,quantity:n}=u(t),o=i(t,".line-item-total-price:not(.ab-added-reduced-total)");n>1&&o&&(o.classList.add("ab-added-reduced-total"),o.insertAdjacentHTML("afterbegin",`<div class="ab-total-price">${s(e)}</div>`))}(t),d(t)}))}))}function g(t,e){t.forEach((t=>{if(t.addedNodes.length>0){const e=Array.from(t.addedNodes).find((t=>1===t.nodeType&&t.classList?.contains("offcanvas-body")));e&&e.querySelector(".offcanvas-cart-items .line-item")&&p()}}))}function b(){return l(".offcanvas",g,{childList:!0,subtree:!0})}function y(t,e){t.forEach((t=>{if(t.addedNodes.length>0){Array.from(t.addedNodes).find((t=>1===t.nodeType&&t.classList?.contains("offcanvas")))&&b()}}))}function f(t){const e=i(".ab-quantity-dropdown-layout"),n="true"===e.getAttribute("expanded")?.toLowerCase();"toggle"===t?e.setAttribute("expanded",!n):"show"===t?e.setAttribute("expanded",!0):"hide"===t&&e.setAttribute("expanded",!1)}function v(){c((()=>i("body.is-ctl-product.is-act-index #productDetailPageBuyProductForm")),(()=>{r("#productDetailPageBuyProductForm .col-4.col-sm-3.d-flex.justify-content-end").forEach((t=>{t.classList.remove("col-sm-3"),t.classList.add("col-sm-4")})),r("#productDetailPageBuyProductForm .col-6.col-sm-7.col-md-8.col-lg-7.col-xl-8").forEach((t=>{t.classList.remove("col-md-8","col-xl-8")})),r("#productDetailPageBuyProductForm .col-sm-9, #productDetailPageBuyProductForm .col-md-9").forEach((t=>{t.classList.remove("col-sm-9","col-md-9"),t.classList.add("col-sm-8")})),function(){const t=i(".product-detail-quantity-group.quantity-selector-group"),e=[{value:1,label:1,discount_percentage:0},{value:2,label:2,discount_percentage:5},{value:3,label:3,discount_percentage:5},{value:4,label:4,discount_percentage:6},{value:5,label:5,discount_percentage:6},{value:6,label:6,discount_percentage:8},{value:7,label:7,discount_percentage:8},{value:8,label:8,discount_percentage:8},{value:9,label:9,discount_percentage:8},{value:10,label:10,discount_percentage:10},{value:11,label:"11+",discount_percentage:10}],n=`\n            <div class="ab-quantity-dropdown-layout" expanded="false">\n                <div class="ab-quantity-dropdown-select">${i(t,".product-detail-quantity-group.quantity-selector-group input.product-detail-quantity-input")?.value||e[0].label}</div>\n                <ul class="ab-quantity-dropdown-options">\n                    ${e.map((({value:t,label:e,discount_percentage:n})=>`\n                            <li class="ab-quantity-dropdown-option" value="${t}">\n                                <span class="ab-quantity-dropdown-option__value">${e}</span>\n                                ${t<=10?`<span class="ab-quantity-dropdown-option__green-badge">Spare ${n}%</span>`:'<span class="ab-quantity-dropdown-option__ten-plus-badge"><i>Bitte Mail an uns</i></span>'}\n                            </li>\n                        `)).join("")}\n                </ul>\n            </div>\n        `;t.insertAdjacentHTML("afterend",n)}()}))}c((function(){return!!document.querySelector(`body:not(.${a[0]}):not(.${a[1]})`)}),(function(){document.body.classList.add(...a),console.table(t),l("body",y,{childList:!0}),b(),v(),document.body.addEventListener("click",(t=>{if(t.target.closest(".ab-quantity-dropdown-select")&&f("toggle"),i(".ab-quantity-dropdown-select")&&!t.target.closest(".ab-quantity-dropdown-layout")&&f("hide"),t.target.closest(".ab-quantity-dropdown-option")){const e=t.target.closest(".ab-quantity-dropdown-option").getAttribute("value");i(".product-detail-quantity-group.quantity-selector-group input.product-detail-quantity-input").value=e,i(".ab-quantity-dropdown-select").innerText=e,f("hide")}}))}))})();
