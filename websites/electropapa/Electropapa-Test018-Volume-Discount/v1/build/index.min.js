(()=>{const e={client:"Netzproduzenten",project:"Project Name",site_url:"https://electropapa.com/de",test_name:"Test018 A/B/C - Followup016 - PDS & Side Cart - Volume discount",page_initials:"AB-TEST-018",test_variation:1,test_version:2e-4},{page_initials:t,test_variation:n,test_version:o}=e,a=[t,`${t}--v${n}`,`${t}--version-${o}`];function c(e,t,n=2e4,o=150){n<=0?console.warn(`Timeout reached while waiting for condition: ${e.toString()}`):e&&e()?t():setTimeout((()=>c(e,t,n-o,o)),o)}function i(e,t){return t?e.querySelector(t):document.querySelector(e)}function r(e,t){return t?[...e.querySelectorAll(t)]:[...document.querySelectorAll(e)]}function l(e,t,n){const o=i(e),a=new MutationObserver(t);return a.observe(o,n),a}function s(e,t=!1){const n=new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e);return t?n.replaceAll(" ",""):n}function d(e){const t=function(e){return e?parseFloat(e.innerText?.replace(".","")?.replace(",",".")?.replace("€","")):0}(i(e,".line-item-total-price-value")),n=+i(e,"input.quantity-selector-group-input")?.value||0,o=function(e,t){const n=[0,0,5,5,6,6,8,8,8,8,10];return e/(1-(t<=10?n[t]:n[10])/100)}(t,n);return{totalPrice:o,offerPrice:t,discount:o-t,quantity:n}}function u(e){const{quantity:t}=d(e),n=`\n            <div class="ab-celebration-message-container ${t<=1?"ab-celebration-message-container--viewing-for-single":""}">${function(e){const{discount:t,quantity:n}=d(e),o=`Glückwunsch! Du sparst ${s(t,!0)} durch unseren Mengenrabatt.`;return n<=1?"":o}(e)}</div>\n        `;var o,a;i(e,".ab-celebration-message-container")||(setTimeout((()=>{e.insertAdjacentHTML("beforeend",n)}),0),t>1&&(o="Shows Celebration Message | JS",a=1004106272,console.log("Triggered convert goal: ",o,a),window._conv_q=window._conv_q||[],_conv_q.push(["triggerConversion",a])))}function p(){r(".offcanvas-cart-items .line-item").forEach((e=>{!function(e){const{totalPrice:t,quantity:n}=d(e),o=i(e,".line-item-total-price:not(.ab-added-reduced-total)");n>1&&o&&(o.classList.add("ab-added-reduced-total"),o.insertAdjacentHTML("afterbegin",`<div class="ab-total-price ">${s(t)}</div>`))}(e),u(e)}))}function b(e,t){e.forEach((e=>{if(e.addedNodes.length>0){const t=Array.from(e.addedNodes).find((e=>1===e.nodeType&&e.classList?.contains("offcanvas-body")));t&&t.querySelector(".offcanvas-cart-items .line-item")&&p()}}))}function g(e,t){e.forEach((e=>{if(e.addedNodes.length>0){Array.from(e.addedNodes).find((e=>1===e.nodeType&&e.classList?.contains("offcanvas")))&&l(".offcanvas",b,{childList:!0,subtree:!0})}}))}function f(e){const t=i(".ab-quantity-dropdown-layout"),n="true"===t.getAttribute("expanded")?.toLowerCase();"toggle"===e?t.setAttribute("expanded",!n):"show"===e?t.setAttribute("expanded",!0):"hide"===e&&t.setAttribute("expanded",!1)}function y(){c((()=>i("body.is-ctl-product.is-act-index #productDetailPageBuyProductForm")),(()=>{r("#productDetailPageBuyProductForm .col-4.col-sm-3.d-flex.justify-content-end").forEach((e=>{e.classList.remove("col-sm-3"),e.classList.add("col-sm-4")})),r("#productDetailPageBuyProductForm .col-6.col-sm-7.col-md-8.col-lg-7.col-xl-8").forEach((e=>{e.classList.remove("col-md-8","col-xl-8")})),r("#productDetailPageBuyProductForm .col-sm-9, #productDetailPageBuyProductForm .col-md-9").forEach((e=>{e.classList.remove("col-sm-9","col-md-9"),e.classList.add("col-sm-8")})),function(){const e=[{value:1,label:1,discount_percentage:0},{value:2,label:2,discount_percentage:5},{value:3,label:3,discount_percentage:5},{value:4,label:4,discount_percentage:6},{value:5,label:5,discount_percentage:6},{value:6,label:6,discount_percentage:8},{value:7,label:7,discount_percentage:8},{value:8,label:8,discount_percentage:8},{value:9,label:9,discount_percentage:8},{value:10,label:10,discount_percentage:10},{value:11,label:"11+",discount_percentage:10}],t=`\n            <div class="ab-quantity-dropdown-layout" expanded="false">\n                <div class="ab-quantity-dropdown-select">${e[0].label}</div>\n                <ul class="ab-quantity-dropdown-options">\n                    ${e.map((({value:e,label:t,discount_percentage:n})=>`\n                            <li class="ab-quantity-dropdown-option" value="${e}">\n                                <span class="ab-quantity-dropdown-option__value">${t}</span>\n                                ${e<=10?`<span class="ab-quantity-dropdown-option__green-badge">Spare ${n}%</span>`:'<span class="ab-quantity-dropdown-option__ten-plus-badge"><i>Bitte Mail an uns</i></span>'}\n                            </li>\n                        `)).join("")}\n                </ul>\n            </div>\n        `;i(".product-detail-quantity-group.quantity-selector-group").insertAdjacentHTML("afterend",t)}()}))}c((function(){return!!document.querySelector(`body:not(.${a[0]}):not(.${a[1]})`)}),(function(){document.body.classList.add(...a),console.table(e),l("body",g,{childList:!0}),y(),document.body.addEventListener("click",(e=>{if(e.target.closest(".ab-quantity-dropdown-select")&&f("toggle"),i(".ab-quantity-dropdown-select")&&!e.target.closest(".ab-quantity-dropdown-layout")&&f("hide"),e.target.closest(".ab-quantity-dropdown-option")){const t=e.target.closest(".ab-quantity-dropdown-option").getAttribute("value");i(".product-detail-quantity-group.quantity-selector-group input.product-detail-quantity-input").value=t,i(".ab-quantity-dropdown-select").innerText=t,f("hide")}}))}))})();
