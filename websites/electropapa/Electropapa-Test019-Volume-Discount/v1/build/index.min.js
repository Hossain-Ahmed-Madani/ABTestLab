(()=>{const e={client:"Netzproduzenten",project:"Project Name",site_url:"https://electropapa.com/de",test_name:"Test018 A/B/C - Followup016 - PDS & Side Cart - Volume discount",page_initials:"AB-TEST-018",test_variation:1,test_version:1e-4},{page_initials:t,test_variation:n,test_version:o}=e,a=[t,`${t}--v${n}`,`${t}--version-${o}`];function i(e,t,n=2e4,o=150){n<=0?console.warn(`Timeout reached while waiting for condition: ${e.toString()}`):e&&e()?t():setTimeout((()=>i(e,t,n-o,o)),o)}function c(e,t){return t?e.querySelector(t):document.querySelector(e)}function r(e,t){return t?[...e.querySelectorAll(t)]:[...document.querySelectorAll(e)]}function l(e,t,n){const o=c(e),a=new MutationObserver(t);return a.observe(o,n),a}function s(e){return e?parseFloat(e.innerText?.replace(".","")?.replace(",",".")?.replace("€","")):0}function u(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e)}function d(e){const t=s(c(e,".line-item-total-price-value")),n=+c(e,"input.quantity-selector-group-input")?.value||0,o=function(e,t){const n=[0,0,5,5,6,6,8,8,8,8,10],o=t<=10?n[t]:n[10],a=e*(o/100);return{discountAmount:a,discountPercentage:o,finalTotal:e-a}}(t,n),a=n>0?o.finalTotal/n:0,i=s(c(e,".line-item-unit-price-value"));return{offerPrice:t,discount:o.discountAmount,totalPrice:o.finalTotal,originalUnitPrice:i,finalUnitPrice:a,quantity:n}}function p(e){const{quantity:t}=d(e);var n,o;c(e,".ab-celebration-message-container")||(e.insertAdjacentHTML("beforeend",`<div class="ab-celebration-message-container ${t<=1?"ab-celebration-message-container--viewing-for-single":""}">${function(e){const{discount:t,quantity:n}=d(e),o=`Glückwunsch! Du sparst ${u(t)} durch unseren Mengenrabatt.`;return n<=1?"":o}(e)}</div>`),t>1&&(n="Shows Celebration Message | JS",o=1004106272,console.log("Triggered convert goal: ",n,o),window._conv_q=window._conv_q||[],_conv_q.push(["triggerConversion",o])))}function f(){r(".offcanvas-cart-items .line-item").forEach((e=>{!function(e){const{totalPrice:t,quantity:n,offerPrice:o}=d(e),a=c(e,".line-item-total-price:not(.ab-added-reduced-total)");n>1&&a&&(a.classList.add("ab-added-reduced-total"),c(a,".line-item-total-price-value").innerText=u(o),a.insertAdjacentHTML("beforeend",`<div class="ab-reduced-total-price">${u(t)}</div>`))}(e),p(e)}))}function b(e,t){e.forEach((e=>{if(e.addedNodes.length>0){const t=Array.from(e.addedNodes).find((e=>1===e.nodeType&&e.classList?.contains("offcanvas-body")));t&&t.querySelector(".offcanvas-cart-items .line-item")&&f()}}))}function g(e,t){e.forEach((e=>{if(e.addedNodes.length>0){Array.from(e.addedNodes).find((e=>1===e.nodeType&&e.classList?.contains("offcanvas")))&&l(".offcanvas",b,{childList:!0,subtree:!0})}}))}function v(e){const t=c(".ab-quantity-dropdown-layout"),n="true"===t.getAttribute("expanded")?.toLowerCase();"toggle"===e?t.setAttribute("expanded",!n):"show"===e?t.setAttribute("expanded",!0):"hide"===e&&t.setAttribute("expanded",!1)}function y(){i((()=>c("body.is-ctl-product.is-act-index #productDetailPageBuyProductForm")),(()=>{r("#productDetailPageBuyProductForm .col-4.col-sm-3.d-flex.justify-content-end").forEach((e=>{e.classList.remove("col-sm-3"),e.classList.add("col-sm-4")})),r("#productDetailPageBuyProductForm .col-6.col-sm-7.col-md-8.col-lg-7.col-xl-8").forEach((e=>{e.classList.remove("col-md-8","col-xl-8")})),r("#productDetailPageBuyProductForm .col-sm-9, #productDetailPageBuyProductForm .col-md-9").forEach((e=>{e.classList.remove("col-sm-9","col-md-9"),e.classList.add("col-sm-8")})),function(){const e=[{value:1,label:1,discount_percentage:0},{value:2,label:2,discount_percentage:5},{value:3,label:3,discount_percentage:5},{value:4,label:4,discount_percentage:6},{value:5,label:5,discount_percentage:6},{value:6,label:6,discount_percentage:8},{value:7,label:7,discount_percentage:8},{value:8,label:8,discount_percentage:8},{value:9,label:9,discount_percentage:8},{value:10,label:10,discount_percentage:10},{value:11,label:"11+",discount_percentage:10}],t=`\n            <div class="ab-quantity-dropdown-layout" expanded="false">\n                <div class="ab-quantity-dropdown-select">${e[0].label}</div>\n                <ul class="ab-quantity-dropdown-options">\n                    ${e.map((({value:e,label:t,discount_percentage:n})=>`\n                            <li class="ab-quantity-dropdown-option" value="${e}">\n                                <span class="ab-quantity-dropdown-option__value">${t}</span>\n                                ${e<=10?`<span class="ab-quantity-dropdown-option__green-badge">Spare ${n}%</span>`:'<span class="ab-quantity-dropdown-option__ten-plus-badge"><i>Bitte Mail an uns</i></span>'}\n                            </li>\n                        `)).join("")}\n                </ul>\n            </div>\n        `;c(".product-detail-quantity-group.quantity-selector-group").insertAdjacentHTML("afterend",t)}()}))}i((function(){return!!document.querySelector(`body:not(.${a[0]}):not(.${a[1]})`)}),(function(){document.body.classList.add(...a),console.table(e),l("body",g,{childList:!0}),y(),document.body.addEventListener("click",(e=>{if(e.target.closest(".ab-quantity-dropdown-select")&&v("toggle"),c(".ab-quantity-dropdown-select")&&!e.target.closest(".ab-quantity-dropdown-layout")&&v("hide"),e.target.closest(".ab-quantity-dropdown-option")){const t=e.target.closest(".ab-quantity-dropdown-option").getAttribute("value");c(".product-detail-quantity-group.quantity-selector-group input.product-detail-quantity-input").value=t,c(".ab-quantity-dropdown-select").innerText=t,v("hide")}}))}))})();
