(()=>{const e={client:"Netzproduzenten",project:"Project Name",site_url:"https://electropapa.com/de",test_name:"Test019 [Electropapa] A/B/C - Followup016 - PDS & Side Cart - Textlink Popup and Volume discount nudge cart",page_initials:"AB-TEST-019",test_variation:2,test_version:2e-4},{page_initials:t,test_variation:n,test_version:s}=e,i=[t,`${t}--v${n}`,`${t}--version-${s}`];function r(e,t,n=2e4,s=150){n<=0?console.warn(`Timeout reached while waiting for condition: ${e.toString()}`):e&&e()?t():setTimeout((()=>r(e,t,n-s,s)),s)}function a(e,t){return t?e.querySelector(t):document.querySelector(e)}function o(e,t){return t?[...e.querySelectorAll(t)]:[...document.querySelectorAll(e)]}function c(e,t,n){r((()=>a(e)),(()=>{const s=a(e),i=new MutationObserver(t);return i.observe(s,n),i}))}function l(e,t=!1){const n=new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e);return t?n.replaceAll(" ",""):n}function b(e){const t=function(e){return e?parseFloat(e.innerText?.replace(".","")?.replace(",",".")?.replace("€","")):0}(a(e,".line-item-total-price-value")),n=+a(e,"input.quantity-selector-group-input")?.value||0,s=function(e,t){const n=[0,0,5,5,6,6,8,8,8,8,10];return e/(1-(t<=10?n[t]:n[10])/100)}(t,n);return{totalPrice:s,offerPrice:t,discount:s-t,quantity:n}}function d(e){const{quantity:t}=b(e);var n,s;!a(e,".ab-single-item-progress-btn-container")&&t<2&&(a(e,".line-item-quantity").classList.add("ab-hidden"),a(e,".line-item-remove").insertAdjacentElement("beforeend",a(e,".line-item-total-price.line-item-price")),e.insertAdjacentHTML("beforeend",'\n            <div class="ab-single-item-progress-btn-container">\n                <div class="ab-single-item-progress-btn-container__heading">Jetzt zum Sparpreis immer Ersatz parat haben</div>\n                <div class="ab-single-item-progress-btn-container__progress-bar" step="1">\n                    <div class="ab-single-item-progress-btn-container__progress-bar__pointer ab-single-item-progress-btn-container__progress-bar__pointer--2"></div>\n                    <div class="ab-single-item-progress-btn-container__progress-bar__pointer ab-single-item-progress-btn-container__progress-bar__pointer--3"></div>\n                </div>\n                <div class="ab-single-item-progress-btn-container__btn-container">\n                    <div class="ab-single-item-progress-btn-container__btn ab-single-item-progress-btn-container__btn--selected" quantity="1">\n                        <span class="ab-single-item-progress-btn-container__btn__label">1 Stück</span>\n                        <span class="ab-single-item-progress-btn-container__btn__badge"></span>\n                    </div>\n                    <div class="ab-single-item-progress-btn-container__btn" quantity="2">\n                        <span class="ab-single-item-progress-btn-container__btn__label">2 Stück</span>\n                        <span class="ab-single-item-progress-btn-container__btn__badge">Spare 5%</span>\n                    </div>\n                    <div class="ab-single-item-progress-btn-container__btn" quantity="4">\n                        <span class="ab-single-item-progress-btn-container__btn__label">4 Stück</span>\n                        <span class="ab-single-item-progress-btn-container__btn__badge">Spare 6%</span>\n                    </div>\n                </div>\n            </div>\n        ')),!a(e,".ab-celebration-message-container")&&t>1&&(e.insertAdjacentHTML("beforeend",`<div class="ab-celebration-message-container">${function(e){const{discount:t,quantity:n}=b(e),s=`Glückwunsch! Du sparst ${l(t,!0)} durch unseren Mengenrabatt.`;return n<=1?"<b>Clever sein und sparen:</b>&nbspAb 2 Stück mindestens 5% Rabatt":s}(e)}</div>`),t>1&&(n="Shows Celebration Message | JS",s=1004106272,console.log("Triggered convert goal: ",n,s),window._conv_q=window._conv_q||[],_conv_q.push(["triggerConversion",s])))}function p(){o(".offcanvas-cart-items .line-item").forEach((e=>{!function(e){const{totalPrice:t,quantity:n}=b(e),s=a(e,".line-item-total-price:not(.ab-added-reduced-total)");n>1&&s&&(s.classList.add("ab-added-reduced-total"),s.insertAdjacentHTML("afterbegin",`<div class="ab-total-price ">${l(t)}</div>`))}(e),d(e)}))}function u(e,t){e.forEach((e=>{if(e.addedNodes.length>0){const t=Array.from(e.addedNodes).find((e=>1===e.nodeType&&e.classList?.contains("offcanvas-body")));t&&t.querySelector(".offcanvas-cart-items .line-item")&&p()}}))}function g(){return c(".offcanvas",u,{childList:!0,subtree:!0})}function _(e,t){e.forEach((e=>{if(e.addedNodes.length>0){Array.from(e.addedNodes).find((e=>1===e.nodeType&&e.classList?.contains("offcanvas")))&&g()}}))}r((function(){return!!document.querySelector(`body:not(.${i[0]}):not(.${i[1]})`)}),(function(){document.body.classList.add(...i),console.table(e),c("body",_,{childList:!0}),g(),document.body.addEventListener("click",(e=>{if(e.target.closest(".ab-single-item-progress-btn-container__btn:not(.ab-single-item-progress-btn-container__btn--selected)")){const t=e.target.closest(".ab-single-item-progress-btn-container__btn:not(.ab-single-item-progress-btn-container__btn--selected)"),n=t.getAttribute("quantity"),s=e.target.closest(".ab-single-item-progress-btn-container");o(s,".ab-single-item-progress-btn-container__btn").forEach((e=>{const n="ab-single-item-progress-btn-container__btn--selected";e===t?e.classList.add(n):e.classList.remove(n)}));const i=a(s,".ab-single-item-progress-btn-container__progress-bar");"1"===n?i.setAttribute("step",1):"2"===n?i.setAttribute("step",2):"4"===n&&i.setAttribute("step",3);const r=a(e.target.closest(".line-item"),".js-offcanvas-cart-change-quantity-number");r.value=n;const c=new Event("change",{bubbles:!0});r.dispatchEvent(c)}if(e.target.closest(".ab-quantity-dropdown-option")){const t=e.target.closest(".ab-quantity-dropdown-option").getAttribute("value");a(".product-detail-quantity-group.quantity-selector-group input.product-detail-quantity-input").value=t}}))}))})();
