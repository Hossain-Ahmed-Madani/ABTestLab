(()=>{const t={client:"ROI Revolutions",project:"Do My Own",site_url:"https://www.domyown.com/termidor-sc-p-184.html",test_name:"PDP - Add a Post ATC Modal (Iteration) [M]",page_initials:"AB-PDP-ATC-MODAL",test_variation:1,test_version:1e-4},{page_initials:e,test_variation:o,test_version:a}=t;function d(t,e){return e?t.querySelector(e):document.querySelector(t)}function n(){const t=d("input.add-to-cart");t.addEventListener("click",(e=>{e.preventDefault(),t.setAttribute("disabled","true");const o=d('form#cart-quantity input[name="_token"]').getAttribute("value"),a=window.location.origin+window.location.pathname;(async function(t,e,o,a){const d=new URLSearchParams;d.append("_token",t),d.append("products_id",e),d.append(`cart_quantity[${e}]`,o),d.append("cart_quantity_entered",o);try{const e=await fetch("https://www.domyown.com/cart",{headers:{accept:"application/json, text/javascript, */*; q=0.01","accept-language":"en-US,en;q=0.9","content-type":"application/x-www-form-urlencoded; charset=UTF-8",priority:"u=1, i","sec-ch-ua":'"Google Chrome";v="141", "Not?A_Brand";v="8", "Chromium";v="141"',"sec-ch-ua-mobile":"?1","sec-ch-ua-platform":'"Android"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-csrf-token":t,"x-newrelic-id":"VwEGVF9SGwEHUVNXBgY=","x-requested-with":"XMLHttpRequest"},referrer:a,body:d.toString(),method:"POST",mode:"cors",credentials:"include"}),o=await e.json();return console.log("Add to Cart Response:",o),{status:o.response,htmlContent:o.content,cartItems:o.cart,dataLayer:o.dataLayer,rfkData:o.rfk}}catch(t){throw console.error("Add to Cart Error:",t),t}})(o,d("#products-grid").getAttribute("data-selected-products-id"),d("#product_qty_display").innerText||0,a).then((async t=>{console.log("Cart updated successfully:",t),await async function(t){document.createElement("div").innerHTML=t,d("body").insertAdjacentHTML("afterbegin",t),d("#modal-window-added-product").style.display="block"}(t.htmlContent),console.log("Modal HTML inserted")})).catch((t=>{console.error("Failed to add to cart:",t)})).finally((()=>{t.removeAttribute("disabled")}))}))}function c(){const t=d("#modal-window-added-product:not(.ab-modal-updated)"),e=d(t,"section.modal-content-body > .flex.flex-wrap > .w-full.border-l.px-4");if(e&&(e.classList.remove("border-1"),e.classList.add("border-t","pt-2"),d(t,".quick-view-addons")?.insertAdjacentElement("afterend",e)),d(t,".modal-content-header")&&!d(t,".ab-close-modal")&&d(t,".modal-content-header").insertAdjacentHTML("afterbegin",'<div class="ab-close-modal" rel="added-product">Ã—</div>'),d(t,".quick-view-addons div[data-rfkid='rfkid_32']:empty")&&!d(t,".ab-cloned-node")){const e=d("#page-content .mt-2.md\\:mt-4.pt-3.md\\:border-t.md\\:pb-4 > div").cloneNode(!0);e.classList.add("ab-cloned-node"),d(t,".quick-view-addons")?.insertAdjacentElement("beforeend",e)}var o,a;(o=".modal-background, .ab-close-modal",a?[...o.querySelectorAll(a)]:[...document.querySelectorAll(o)]).forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),function(){const t=d("#modal-window-added-product"),e=d(t,".modal-background"),o=d(t,".modal-content");e.classList.remove("is-active"),o.classList.remove("is-active"),setTimeout((()=>{t.classList.remove("is-active"),d(t,".close-modal").click()}),300)}()}))})),t.classList.add("ab-modal-updated")}function r(){return new MutationObserver(((t,e)=>{d("#modal-window-added-product:not(.ab-modal-updated)")&&(console.log("Modal added to body"),c(),function(){const t=d("#modal-window-added-product"),e=d(t,".modal-background"),o=d(t,".modal-content");t.classList.add("is-active"),t.offsetWidth,e.classList.add("is-active"),o.classList.add("is-active")}())})).observe(d("body"),{attributes:!1,childList:!0,subtree:!1})}!function t(e,o,a=1e4,d=150){a<=0||(e&&e()?o():setTimeout((()=>t(e,o,a-d,d)),d))}((function(){return!!(window?.location?.pathname?.includes("-p-")&&d(`body:not(.${e}):not(${e}--v${o})`)&&d("form#cart-quantity")&&d("input.add-to-cart"))}),(function(){document.body.classList.add(e,`${e}--v${o}`,`${e}--version:${a}`),console.table(t),n(),r()}))})();
