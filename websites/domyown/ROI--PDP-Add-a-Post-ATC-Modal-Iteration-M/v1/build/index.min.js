(()=>{const t={client:"ROI Revolutions",project:"Do My Own",site_url:"https://www.domyown.com/termidor-sc-p-184.html",test_name:"PDP - Add a Post ATC Modal (Iteration) [M]",page_initials:"AB-PDP-ATC-MODAL",test_variation:1,test_version:5e-4},{page_initials:e,test_variation:n,test_version:o}=t;function a(t,e,n=3e4,o=150){n<=0||(t&&t()?e():setTimeout((()=>a(t,e,n-o,o)),o))}function r(t,e){return e?t.querySelector(e):document.querySelector(t)}async function i(e){var n,o;!function(t){const e=function(t){let e=t;return[/<script\b[^>]*>[\s\S]*?<\/script>/gi,/<script\b[^>]*\/>/gi,/<script\b[^>]*>(.*?)<\/script>/gi].forEach((t=>{e=e.replace(t,"")})),e}(t);r("body").insertAdjacentHTML("afterbegin",e)}(e.htmlString),await async function(){const{htmlString:t,cartAmount:e}=await async function(){try{const t=await fetch("https://www.domyown.com/cart/mini",{headers:{accept:"application/json, text/javascript, */*; q=0.01","accept-language":"en-US,en;q=0.9","content-type":"application/x-www-form-urlencoded; charset=UTF-8",priority:"u=1, i","sec-ch-ua":'"Google Chrome";v="141", "Not?A_Brand";v="8", "Chromium";v="141"',"sec-ch-ua-mobile":"?1","sec-ch-ua-platform":'"Android"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-csrf-token":"RBePmwuHWyWx43OZ7yx8UbDCZsEKhMXPkFwuKm02","x-newrelic-id":"VwEGVF9SGwEHUVNXBgY=","x-requested-with":"XMLHttpRequest"},referrer:"https://www.domyown.com/cart",method:"GET",mode:"cors",credentials:"include"}),e=await t.json();return{status:e.response,htmlString:e.content,cartAmount:e.cartAmount}}catch(t){throw console.error("Mini Cart Error:",t),t}}();return function(t){const e=r("#modal-window-added-product:not(.ab-modal-updated)"),n=r(e,".quick-view-addons .mt-2.md\\:mt-4.pt-3.md\\:border-t.md\\:pb-4 div[data-rfkid='rfkid_32']");n&&n?.parentNode.remove();r(e,".modal-content-header")&&!r(e,".ab-close-modal")&&r(e,".modal-content-header").insertAdjacentHTML("afterbegin",'<div class="ab-close-modal" rel="added-product">Ã—</div>');const o=r(e,"section.modal-content-body > .flex.flex-wrap > .w-full.border-l.px-4"),a=r(e,".quick-view-addons");o&&(o.classList.remove("border-1"),o.classList.add("border-t","pt-2"),a?.insertAdjacentElement("afterend",o));a.insertAdjacentHTML("beforeend",`\n            <ul class="skeleton-loader">\n                ${Array.from({length:2}).map((t=>'\n                            <li class="skeleton-product">\n                                <div class="skeleton-pulse skeleton-image"></div>\n                                <div class="skeleton-rating">\n                                    <div class="skeleton-pulse skeleton-star"></div>\n                                    <div class="skeleton-pulse skeleton-star"></div>\n                                    <div class="skeleton-pulse skeleton-star"></div>\n                                    <div class="skeleton-pulse skeleton-star"></div>\n                                    <div class="skeleton-pulse skeleton-review-count"></div>\n                                </div>\n                                <div class="skeleton-pulse skeleton-text medium"></div>\n                            </li>\n                        ')).join("")}\n            </ul>\n        `);const i=r(e,".modal-content-body > div.flex.flex-wrap.md\\:flex-no-wrap > .w-full.md\\:w-2\\/3 p:last-of-type");if(i&&!r(e,".ab-price-content")){const e=function(t){const e=document.createElement("div");e.innerHTML=t;const n=r("#products-grid").getAttribute("data-selected-products-id"),o=r(e,`tr.product-item-${n} .text-right.border-t.border-grey-light.align-top.font-bold.py-1`)?.innerHTML;return o}(t);i.insertAdjacentHTML("afterend",`<div class="ab-price-content">${e}</div>`),i.classList.add("hidden")}e.classList.add("ab-modal-updated")}(t),function(){a((()=>!("function"!=typeof window.rfk.init||!r("#modal-window-added-product .skeleton-loader"))),(()=>{const t=r("#modal-window-added-product"),e=r(t,".skeleton-loader");e?.insertAdjacentHTML("beforebegin",'<div class="ab-modal-slider" data-rfkid="rfkid_32"></div>'),window.rfk.init(),t.classList.add("ab-carousel-initialized")}))}(),function(t){const e=r("#mini-cart");let n=r(e,".cart-amount");n||(n=document.createElement("div"),n.setAttribute("id","cart-amount"),n.className="absolute text-xs text-white bg-red-light rounded-full border-2 border-white h-6 w-6 text-center -pin-r-2 -pin-t-2",e.insertAdjacentElement("beforeend",n));n.innerText=t}(e),!0}(),function(){const e=r("body"),n=r("#modal-window-added-product"),o=r(n,".modal-background"),a=r(n,".modal-content");n.classList.add("is-active"),n.offsetWidth,e.classList.add(t.page_initials+"--overflow-hidden"),o.classList.add("is-active"),a.classList.add("is-active")}(),(n=".modal-background, .ab-close-modal, .close-modal.no-margin",o?[...n.querySelectorAll(o)]:[...document.querySelectorAll(n)]).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),function(){const e=r("body"),n=r("#modal-window-added-product"),o=r(n,".modal-background"),a=r(n,".modal-content");e.classList.remove(t.page_initials+"--overflow-hidden"),o.classList.remove("is-active"),a.classList.remove("is-active"),setTimeout((()=>{n.classList.remove("is-active"),r(n,".close-modal:not(.not-margin)").click()}),300)}()}))}));r("button.ab-add-to-cart").removeAttribute("disabled")}function d(){const t=document.createElement("button");t.setAttribute("type","button"),t.setAttribute("href","javascript:void(0)"),t.className="button-primary ab-add-to-cart text-lg w-full md:w-4/5 text-center",t.innerText="Add to Cart",t.addEventListener("click",(async e=>{e.preventDefault(),e.stopPropagation(),t.setAttribute("disabled","true");const{token:n,referrer:o,productId:a,productQuantity:d}={token:r('form#cart-quantity input[name="_token"]').getAttribute("value"),referrer:window.location.origin+window.location.pathname,productId:r("#products-grid").getAttribute("data-selected-products-id"),productQuantity:r("#product_qty_display").innerText||0},c=await async function(t,e,n,o){const a=new URLSearchParams;a.append("_token",t),a.append("products_id",e),a.append(`cart_quantity[${e}]`,n),a.append("cart_quantity_entered",n);try{const e=await fetch("https://www.domyown.com/cart",{headers:{accept:"application/json, text/javascript, */*; q=0.01","accept-language":"en-US,en;q=0.9","content-type":"application/x-www-form-urlencoded; charset=UTF-8",priority:"u=1, i","sec-ch-ua":'"Google Chrome";v="141", "Not?A_Brand";v="8", "Chromium";v="141"',"sec-ch-ua-mobile":"?1","sec-ch-ua-platform":'"Android"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-csrf-token":t,"x-newrelic-id":"VwEGVF9SGwEHUVNXBgY=","x-requested-with":"XMLHttpRequest"},referrer:o,body:a.toString(),method:"POST",mode:"cors",credentials:"include"}),n=await e.json();return{status:n.response,htmlString:n.content,cartItems:n.cart,dataLayer:n.dataLayer,rfkData:n.rfk}}catch(t){throw console.error("Add to Cart Error:",t),t}}(n,a,d,o);i(c)})),r("input.add-to-cart").insertAdjacentElement("afterend",t)}a((function(){return!!(window?.location?.pathname?.includes("-p-")&&r(`body:not(.${e}):not(${e}--v${n})`)&&r("form#cart-quantity")&&r("input.add-to-cart"))}),(function(){document.body.classList.add(e,`${e}--v${n}`,`${e}--version:${o}`),console.table(t),d()}))})();
