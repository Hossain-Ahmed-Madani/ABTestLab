(()=>{const t={page_initials:"AB-BL10",test_variation:1,test_version:6e-4};function e(t,e=""){console.log("BL10: ",t,e),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"GA4event","ga4-event-name":"cro_event","ga4-event-p1-name":"event_category","ga4-event-p1-value":t,"ga4-event-p2-name":"event_label","ga4-event-p2-value":e})}function n(t,e,o=2e4,l=150){o<=0||(t&&t()?e():setTimeout((()=>n(t,e,o-l,l)),l))}function o(t,e){return document.querySelector(t)}function l(t,e){return e?[...t.querySelectorAll(e)]:[...document.querySelectorAll(t)]}function s(){const t=l(".dss-content h2, .dss-content h3").reduce(((t,e)=>e.textContent.trim().length>0?t+1:t),0);o("#nav").insertAdjacentHTML("afterend",`\n                <div class="ab-scroll-and-table-contents ${t>0?"":"ab-scroll-and-table-contents--only-scroll"}">\n                    <div class="ab-scroll-container" data-scroll="25"></div>\n                    ${l(".dss-content h2, .dss-content h3").length>0?function(){const t=l(".dss-content h2, .dss-content h3").filter((t=>t.textContent.trim().length>0)),e=t[0];return`\n            <div class="ab-table-contents-container container">\n                <div class="ab-table-contents-title">Table of Contents</div>\n                <div class="ab-table-content-selection" data-state="closed">\n                    <div class="ab-table-content-selected-item">\n                        <span>1.1</span>\n                        <span class="ab-ellipsis-two-lines">${e.textContent.split(".")?.[1]||e.textContent}</span>\n                    </div>\n                    <ul class="ab-table-content-list">\n                        ${Array.from(t).map(((e,n)=>{e.setAttribute("id",`section-${n+1}`);const o=e.textContent.split(".")[1]||e.textContent;return`\n                                    <li targetH3="#section-${n+1}" class="ab-table-content-item" ${0===n?"selected":""}>\n                                        <span>1.${n+1}</span>\n                                        <span class=" ab-ellipsis-two-lines">${o}</span>\n                                    </li>\n\n                                    ${1===t.length?`\n                                              <li targetH3="#section-${n+1}" class="ab-table-content-item">\n                                                  <span>1.${n+1}</span>\n                                                  <span class=" ab-ellipsis-two-lines">${o}</span>\n                                              </li>\n                                          `:""}\n                                `})).join("")}\n                    </ul>\n                </div>\n            </div>\n        `}():""}\n                </div>\n            `)}function c(){const t=[25,50,75,100];let n=null;return{handleScrollGa4Goal:()=>{const o=(e=>t.reduce(((t,n)=>e>=n?n:t),0))((window.scrollY||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-window.innerHeight)*100);o!==n&&0!==o&&(null!==n&&console.log(`User moved from ${n}% â†’ ${o}%`),n=o),25===o?e("BL10_Scrolldepth","25%"):50===o?e("BL10_Scrolldepth","50%"):75===o?e("BL10_Scrolldepth","75%"):100===o&&e("BL10_Scrolldepth","100%")}}}function i(){const t=o(".ab-scroll-container"),e=o(".main-content .dss-content");if(!e)return;const{getScrollPercent:n,closestMilestone:l}=function(t){const e=[25,50,75,100];return{getScrollPercent:()=>{if(!t)return 0;t.getBoundingClientRect();const e=window.innerHeight,n=window.scrollY||document.documentElement.scrollTop,o=t.offsetTop,l=o-e,s=o+t.offsetHeight-e;let c=0;return c=n<=l?0:n>=s?100:(n-l)/(s-l)*100,Math.min(Math.max(c,0),100)},closestMilestone:t=>e.reduce(((e,n)=>t>=n?n:e),25)}}(e),s=l(n());void 0===window.scrollMilestones&&(window.scrollMilestones={25:!1,50:!1,75:!1,100:!1});const c=Math.max(s,25);t.setAttribute("data-scroll",c),25!==c||window.scrollMilestones[25]?50!==c||window.scrollMilestones[50]?75!==c||window.scrollMilestones[75]?100!==c||window.scrollMilestones[100]||(window.scrollMilestones[100]=!0):window.scrollMilestones[75]=!0:window.scrollMilestones[50]=!0:window.scrollMilestones[25]=!0}function a(){const{handleScrollGa4Goal:t}=c();n((()=>o(".ab-scroll-container")),(()=>{const e=function(t,e){let n;return function(...o){n||(t.apply(this,o),n=!0,setTimeout((()=>n=!1),e))}}(i,50);window.addEventListener("scroll",(n=>{t(),e()}))}))}function r(t){if(!t)return;const n=o(t),l=function(){const t={"(max-width: 575px)":200,"(min-width: 576px) and (max-width: 991px)":230,"(min-width: 992px)":150},e=Object.keys(t).find((t=>window.matchMedia(t).matches));return e?t[e]:150}();window.scrollTo({top:n.offsetTop-l,behavior:"smooth"}),e("BL10_Tableofcontent",n.textContent),setTimeout((()=>!0),1500)}function d(t){const e=o(".ab-table-content-selection");"show"===t?e.setAttribute("data-state","opened"):"hide"===t&&e.setAttribute("data-state","closed")}n((function(){return!!(o(`body:not(.${t.page_initials}):not(${t.page_initials}--v${t.test_variation})`)&&o("#nav")&&o(".dss-content"))}),(function(){const{page_initials:e,test_variation:c,test_version:i}=t;document.body.classList.add(e,`${e}--v${c}`,`${e}--version:${i}`),s(),[{selector:".ab-scroll-and-table-contents",event:"click",callback:t=>t.preventDefault()},{selector:".ab-table-content-selection",event:"mouseenter",callback:t=>{window.innerWidth>=1200&&d("show")}},{selector:".ab-table-content-selection",event:"mouseleave",callback:t=>{window.innerWidth>=1200&&d("hide")}},{selector:"body",event:"click",callback:t=>{window.innerWidth>=1200||t.target.closest(".ab-table-content-selection")||d("hide")}},{selector:".ab-table-content-selected-item",event:"click",callback:t=>{"closed"===o(".ab-table-content-selection").getAttribute("data-state")&&d("show")}},{selector:".ab-table-content-item",event:"click",callback:t=>{if(t.target.hasAttribute("selected"))setTimeout((()=>d("hide")),50);else if(!t.target.hasAttribute("selected")){o(".ab-table-content-selection");const e=[...l(".ab-table-content-item")],n=o(".ab-table-content-item[selected]"),s=t.target.closest(".ab-table-content-item");if(0===e.indexOf(s)&&!t.target.closest("span"))return void d("hide");n.getAttribute("targeth3")!==s.getAttribute("targeth3")&&(e.forEach((t=>t.removeAttribute("selected"))),s.setAttribute("selected","true"),o(".ab-table-content-selected-item").innerHTML=s.innerHTML),d("hide"),r(s.getAttribute("targetH3"))}}}].forEach((({selector:t,event:e,callback:o})=>{n((()=>t&&l(t).length>0),(()=>{l(t).forEach((t=>t.addEventListener(e,o)))}))})),a()}))})();
