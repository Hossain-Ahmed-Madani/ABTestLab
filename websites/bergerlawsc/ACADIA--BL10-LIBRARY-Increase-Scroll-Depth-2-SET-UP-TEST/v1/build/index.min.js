(()=>{const t={page_initials:"AB-BL10",test_variation:1,test_version:5e-4};let e=!1;function n(t,e=""){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"GA4event","ga4-event-name":"cro_event","ga4-event-p1-name":"event_category","ga4-event-p1-value":t,"ga4-event-p2-name":"event_label","ga4-event-p2-value":e})}function o(t,e,n=2e4,l=150){n<=0||(t&&t()?e():setTimeout((()=>o(t,e,n-l,l)),l))}function l(t,e){return document.querySelector(t)}function s(t,e){return e?[...t.querySelectorAll(e)]:[...document.querySelectorAll(t)]}function c(){const t=s(".dss-content h2, .dss-content h3").reduce(((t,e)=>e.textContent.trim().length>0?t+1:t),0);l("#nav").insertAdjacentHTML("afterend",`\n                <div class="ab-scroll-and-table-contents ${t>0?"":"ab-scroll-and-table-contents--only-scroll"}">\n                    <div class="ab-scroll-container" data-scroll="25"></div>\n                    ${s(".dss-content h2, .dss-content h3").length>0?function(){const t=s(".dss-content h2, .dss-content h3").filter((t=>t.textContent.trim().length>0)),e=t[0];return`\n            <div class="ab-table-contents-container container">\n                <div class="ab-table-contents-title">Table of Contents</div>\n                <div class="ab-table-content-selection" data-state="closed">\n                    <div class="ab-table-content-selected-item">\n                        <span>1.1</span>\n                        <span class="ab-ellipsis-two-lines">${e.textContent.split(".")?.[1]||e.textContent}</span>\n                    </div>\n                    <ul class="ab-table-content-list">\n                        ${Array.from(t).map(((e,n)=>{e.setAttribute("id",`section-${n+1}`);const o=e.textContent.split(".")[1]||e.textContent;return`\n                                    <li targetH3="#section-${n+1}" class="ab-table-content-item" ${0===n?"selected":""}>\n                                        <span>1.${n+1}</span>\n                                        <span class=" ab-ellipsis-two-lines">${o}</span>\n                                    </li>\n\n                                    ${1===t.length?`\n                                              <li targetH3="#section-${n+1}" class="ab-table-content-item">\n                                                  <span>1.${n+1}</span>\n                                                  <span class=" ab-ellipsis-two-lines">${o}</span>\n                                              </li>\n                                          `:""}\n                                `})).join("")}\n                    </ul>\n                </div>\n            </div>\n        `}():""}\n                </div>\n            `)}function i(){const t={"(max-width: 575px)":200,"(min-width: 576px) and (max-width: 991px)":230,"(min-width: 992px)":150},e=Object.keys(t).find((t=>window.matchMedia(t).matches));return e?t[e]:150}function a(){const t=l(".ab-scroll-container"),e=l(".main-content .dss-content");if(!e)return;const{getScrollPercent:o,closestMilestone:s}=function(t){const e=[25,50,75,100];return{getScrollPercent:()=>{if(!t)return 0;t.getBoundingClientRect();const e=window.innerHeight,n=window.scrollY||document.documentElement.scrollTop,o=t.offsetTop,l=o-e,s=o+t.offsetHeight-e;let c=0;return c=n<=l?0:n>=s?100:(n-l)/(s-l)*100,Math.min(Math.max(c,0),100)},closestMilestone:t=>e.reduce(((e,n)=>t>=n?n:e),25)}}(e),c=o(),i=s(c);console.log("Scroll Percent:",c.toFixed(2)+"%"),console.log("Milestone:",i+"%"),console.log("Element Top:",e.offsetTop),console.log("Element Height:",e.offsetHeight),console.log("Scroll Top:",window.scrollY||document.documentElement.scrollTop),console.log("Window Height:",window.innerHeight),console.log("Start Point:",e.offsetTop-window.innerHeight),console.log("End Point:",e.offsetTop+e.offsetHeight-window.innerHeight),console.log("Element fully visible when scroll reaches:",e.offsetTop),console.log("Element fully scrolled when scroll reaches:",e.offsetTop+e.offsetHeight-window.innerHeight),console.log("---"),void 0===window.scrollMilestones&&(window.scrollMilestones={25:!1,50:!1,75:!1,100:!1});const a=Math.max(i,25);t.setAttribute("data-scroll",a),25!==a||window.scrollMilestones[25]?50!==a||window.scrollMilestones[50]?75!==a||window.scrollMilestones[75]?100!==a||window.scrollMilestones[100]||(window.scrollMilestones[100]=!0,n("BL10_Scrolldepth","100%")):(window.scrollMilestones[75]=!0,n("BL10_Scrolldepth","75%")):(window.scrollMilestones[50]=!0,n("BL10_Scrolldepth","50%")):(window.scrollMilestones[25]=!0,n("BL10_Scrolldepth","25%"))}function r(){const{handleAutoSelect:t}=function(){const t=s(".dss-content h2, .dss-content h3").reduce(((t,e)=>e.textContent.trim().length>0?t+1:t),0),n=i(),o=[...s(".ab-table-content-item")];return{handleAutoSelect:()=>{1!==t&&!1!==e&&o.forEach((t=>{const e=l(t.getAttribute("targeth3")).getBoundingClientRect().top;e>100&&e<=n&&!t.hasAttribute("selected")&&(o.forEach((t=>t.removeAttribute("selected"))),t.setAttribute("selected",""),l(".ab-table-content-selected-item").innerHTML=t.innerHTML)}))}}}();t(),a()}function d(){o((()=>l(".ab-scroll-container")),(()=>{const t=function(t,e){let n;return function(...o){n||(t.apply(this,o),n=!0,setTimeout((()=>n=!1),e))}}(r,50);window.addEventListener("scroll",t)}))}function b(t){const e=l(".ab-table-content-selection");"show"===t?e.setAttribute("data-state","opened"):"hide"===t&&e.setAttribute("data-state","closed")}function u(){[{selector:".ab-scroll-and-table-contents",event:"click",callback:t=>t.preventDefault()},{selector:".ab-table-content-selection",event:"mouseenter",callback:t=>{window.innerWidth>=1200&&b("show")}},{selector:".ab-table-content-selection",event:"mouseleave",callback:t=>{window.innerWidth>=1200&&b("hide")}},{selector:".ab-table-content-selected-item",event:"click",callback:t=>{"closed"===l(".ab-table-content-selection").getAttribute("data-state")&&b("show")}},{selector:".ab-table-content-item",event:"click",callback:t=>{if(t.target.hasAttribute("selected"))setTimeout((()=>b("hide")),50);else if(!t.target.hasAttribute("selected")){const o=l(".ab-table-content-selection"),c=[...s(".ab-table-content-item")],a=l(".ab-table-content-item[selected]"),r=t.target.closest(".ab-table-content-item");a.getAttribute("targeth3")!==r.getAttribute("targeth3")&&(c.forEach((t=>t.removeAttribute("selected"))),r.setAttribute("selected","true"),l(".ab-table-content-selected-item").innerHTML=r.innerHTML),setTimeout((()=>o.setAttribute("data-state","closed")),50),function(t){if(!t)return;const o=l(t),s=i();e=!1,window.scrollTo({top:o.offsetTop-s,behavior:"smooth"}),n("BL10_Tableofcontent",o.textContent),setTimeout((()=>e=!0),1500)}(r.getAttribute("targetH3"))}}}].forEach((({selector:t,event:e,callback:n})=>{o((()=>t&&s(t).length>0),(()=>{s(t).forEach((t=>t.addEventListener(e,n)))}))}))}o((function(){return!!(l(`body:not(.${t.page_initials}):not(${t.page_initials}--v${t.test_variation})`)&&l("#nav")&&l(".dss-content"))}),(function(){const{page_initials:e,test_variation:n,test_version:o}=t;document.body.classList.add(e,`${e}--v${n}`,`${e}--version:${o}`),c(),u(),d()}))})();
