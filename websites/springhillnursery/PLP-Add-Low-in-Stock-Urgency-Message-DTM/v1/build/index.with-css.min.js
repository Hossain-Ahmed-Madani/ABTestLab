var t;t=setInterval((function(){if(document.head){clearInterval(t);var e=document.createElement("style");e.innerHTML='.AB-PLP-URGENCY .ab-urgency-msg {\n  margin-top: 7px;\n  font-family: "Libre Baskerville";\n  font-weight: 700;\n  font-size: var(--font-size-body-100);\n  line-height: 100%;\n  letter-spacing: 0px;\n  text-align: center;\n  color: rgb(127, 40, 65);\n  white-space: nowrap;\n}\n',document.head.appendChild(e),setTimeout((()=>{clearInterval(t)}),5e3)}}),100),(async()=>{const t={client:"EchoLogyx",project:"springhillnursery",site_url:"https://springhillnursery.com",test_name:"PLP - Add Low in Stock Urgency Message [DTM]",page_initials:"AB-PLP-URGENCY",test_variation:1,test_version:3e-4},{page_initials:e,test_variation:n,test_version:o}=t;function r(t,e){return e?t.querySelector(e):document.querySelector(t)}const a={1:"Hurry! Selling Fast!",2:"Low in Stock"},i="ab-urgency-shuffled-data";function c(){return new URLSearchParams(window.location.search).get("page")||"1"}function s(){try{const t=sessionStorage.getItem(i);return t?JSON.parse(t):{}}catch(t){return{}}}function l(){const t=window.location.pathname,e=c(),n=s();return n[t]?.[e]||null}function u(t){const e=window.location.pathname,n=c(),o=s();o[e]||(o[e]={}),o[e][n]=t,function(t){try{sessionStorage.setItem(i,JSON.stringify(t))}catch(t){return}}(o)}function d(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}function g(){console.log("updateLayout...");const t=[...document.querySelectorAll(".product-item[data-id]:not(.ab-urgency-msg-injected):not(:has( .soldoutstrip))")];if(0===t.length)return;const e=l();let o;e?o=e.map((e=>t.find((t=>t.getAttribute("data-id")===e)))).filter((t=>void 0!==t)):(o=function(t){if(1===t.length)return t;const e=Math.max(1,Math.min(t.length,Math.round(.3*t.length))),n=Math.min(Math.floor(3*Math.random()),t.length-1),o=t[n],r=d([...t.filter(((t,e)=>e!==n))]);return d([o,...r.slice(0,e-1)])}(t),u(o.map((t=>t.getAttribute("data-id"))))),console.log("Log 1","Total Cards",t.length),console.log("Log 2","Total Selected Cards",o.length),console.log("Log 3","Selected/Stored Cards",l()),o.forEach((t=>{t.classList.add("ab-urgency-msg-injected"),r(t,".product-item__text_group_primary").insertAdjacentHTML("beforeend",`<div class="ab-urgency-msg">${a[n]}</div>`)}))}try{await async function(t,e=2e4,n=150){const o=Date.now();return new Promise(((r,a)=>{if("function"==typeof t&&t())return r(!0);const i=setInterval((()=>Date.now()-o>=e?(clearInterval(i),a(new Error(`Timeout of ${e}ms reached while waiting for condition: ${t.toString()}`))):"function"==typeof t&&t()?(clearInterval(i),r(!0)):void 0),n)}))}((function(){return!!(r(`body:not(.${e}):not(.${e}--v${n})`)&&r("#root")&&r(".collection__products-container")&&"complete"===document.readyState)})),r("body").classList.add(e,`${e}--v${n}`,`${e}--version:${o}`),console.table(t),g(),function(){const t=r("#root"),e=function(t){let e;return function(...n){clearTimeout(e),e=setTimeout((()=>{clearTimeout(e),t(...n)}),250)}}(g);new MutationObserver(e).observe(t,{childList:!0,subtree:!1,attributes:!1})}()}catch(t){return console.warn(t),!1}})();
