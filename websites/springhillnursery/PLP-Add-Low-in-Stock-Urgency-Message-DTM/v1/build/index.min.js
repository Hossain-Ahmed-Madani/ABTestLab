(async()=>{const t={client:"EchoLogyx",project:"springhillnursery",site_url:"https://springhillnursery.com",test_name:"PLP - Add Low in Stock Urgency Message [DTM]",page_initials:"AB-PLP-URGENCY",test_variation:1,test_version:1e-4},{page_initials:e,test_variation:n,test_version:o}=t;function r(t,e){return e?t.querySelector(e):document.querySelector(t)}const i={1:"Hurry! Selling Fast",2:"Low in Stock"};function c(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}function s(){console.log("updateLayout...");const t=(e=".product-item[data-id]:not(.ab-urgency-msg-injected):not(:has( .soldoutstrip))",[...document.querySelectorAll(e)]);var e;if(0===t.length)return;const o=function(t){if(1===t.length)return t;const e=Math.max(1,Math.min(t.length,Math.round(.3*t.length))),n=Math.min(Math.floor(3*Math.random()),t.length-1),o=[t[n],...c([...t.filter(((t,e)=>e!==n))]).slice(0,e-1)];return console.log("selectedCards...",t.length,o.length),c(o)}(t);o.forEach((t=>{t.classList.add("ab-urgency-msg-injected"),r(t,".product-item__text_group_primary").insertAdjacentHTML("beforeend",`<div class="ab-urgency-msg">${i[n]}</div>`)}))}function a(){const t=r("#root"),e=function(t,e){let n;return function(...o){clearTimeout(n),n=setTimeout((()=>{clearTimeout(n),t(...o)}),e)}}(s,250);return new MutationObserver(e).observe(t,{childList:!0,subtree:!1,attributes:!1})}try{await async function(t,e=2e4,n=150){const o=Date.now();return new Promise(((r,i)=>{if("function"==typeof t&&t())return r(!0);const c=setInterval((()=>Date.now()-o>=e?(clearInterval(c),i(new Error(`Timeout of ${e}ms reached while waiting for condition: ${t.toString()}`))):"function"==typeof t&&t()?(clearInterval(c),r(!0)):void 0),n)}))}((function(){return!!(r(`body:not(.${e}):not(.${e}--v${n})`)&&r("#root")&&r(".collection__products-container"))})),r("body").classList.add(e,`${e}--v${n}`,`${e}--version:${o}`),console.table(t),s(),a()}catch(t){return console.warn(t),!1}})();
