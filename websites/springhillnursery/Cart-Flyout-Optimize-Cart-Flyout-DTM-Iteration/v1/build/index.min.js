(async()=>{const{page_initials:t,test_variation:e,test_version:n}={page_initials:"AB-OPT-CART-ITERATION",test_variation:1,test_version:1e-4};function a(t,e){return e?t.querySelector(e):document.querySelector(t)}function o(t){if("string"!=typeof t)return"";const e=t.replace(/[^0-9.\-]/g,""),n=parseFloat(e);return isNaN(n)?0:n}function r(){let t=0;var e,n;return(e=".quick-cart__item:has(s.quick-cart__item-price)",n?[...e.querySelectorAll(n)]:[...document.querySelectorAll(e)]).forEach((e=>{const n=a(e,"s.quick-cart__item-price")?.textContent??"",r=a(e,"span.quick-cart__item-price")?.textContent??"",i=+a(e,"input.quantity-input__input")?.value??1;n&&r&&(t+=i*(o(n)-o(r)))})),t}function i(){console.log("create layout...");const t=r(),e=a(".ab-total-saved__value");!e&&t>0&&a(".quick-cart__footer-subtotal")?.insertAdjacentHTML("afterend",`\n                    <div class="ab-total-saved">\n                        <h4 class="ab-total-saved__label">You Saved</h4>\n                        <span class="ab-total-saved__value">$${t.toFixed(2)}</span>\n                    </div>\n                `),e&&o(e.textContent).toFixed(2)!==t.toFixed(2)&&(e.textContent=`$${t.toFixed(2)}`),0===t&&a(".ab-total-saved")&&a(".ab-total-saved")?.remove(),a(".ab-tax-note")||a(".quick-cart__footer-tax-note")?.insertAdjacentHTML("afterend",'<p class="ab-tax-note ff-body fs-body-75 t-subdued">Apply discounts & gift certificates at checkout.</p>')}try{return await async function(t,e=2e4,n=150){const a=Date.now();return new Promise(((o,r)=>{if("function"==typeof t&&t())return o(!0);const i=setInterval((()=>Date.now()-a>=e?(clearInterval(i),r(new Error(`Timeout of ${e}ms reached while waiting for condition: ${t.toString()}`))):"function"==typeof t&&t()?(clearInterval(i),o(!0)):void 0),n)}))}((function(){return!(!a(`body:not(.${t}):not(${t}--v${e})`)||!a(".quick-cart"))})),a("body").classList.add(t,`${t}--v${e}`,`${t}--version:${n}`),i(),function(){const t=a(".quick-cart"),e=function(t,e){let n;return function(...a){clearTimeout(n),n=setTimeout((()=>{clearTimeout(n),t(...a)}),e)}}(i,250);new MutationObserver(e).observe(t,{childList:!0,subtree:!0,attributes:!0})}(),!0}catch(t){return console.warn(t),!1}})();
