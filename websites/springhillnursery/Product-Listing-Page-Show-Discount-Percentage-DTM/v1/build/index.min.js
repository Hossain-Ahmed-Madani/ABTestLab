(()=>{const e={client:"ROI Revolution",project:"springhillnursery",site_url:"https://springhillnursery.com/",test_name:"Product Listing Page - Show Discount Percentage [DTM]",page_initials:"AB-PLP-DTM",test_variation:1,test_version:6e-4};function t(){document.querySelectorAll(".product-item:has(.sale)").forEach(((e,t)=>{let n=e.querySelector(".ab-savings-percentage");n||(n=document.createElement("span"),n.className="displayed-discount badge-shape fs-body-75 ab-savings-percentage",n.setAttribute("data-badge-shape","rounded-rectangle"),e.querySelector(".product-item__price-wrap").insertAdjacentElement("afterend",n));const o=e.querySelector(".sale"),r=e.querySelector("s.t-subdued");n.innerText="Save "+function(e,t){let n,o;if(e.querySelector("s.t-subdued")){const r=t.textContent.match(/[\d,.]+/),i=e.textContent.match(/\$\s?([\d,.]+)/g);if(!r||!i||i.length<2)return null;if(n=parseFloat(r[0].replace(/,/g,"")),o=parseFloat(i[i.length-1].replace(/[^0-9.]/g,"")),isNaN(n)||isNaN(o)||n<=o)return null}else{const r=t.textContent,i=e.textContent,a=r.match(/[\d,.]+/),s=i.match(/[\d,.]+/);if(!a||!s)return null;if(n=parseFloat(a[0].replace(/,/g,"")),o=parseFloat(s[0].replace(/,/g,"")),isNaN(n)||isNaN(o)||n<=o)return null}const r=(n-o)/n*100;return Math.round(r)}(o,r)+"%"}))}!function e(t,n,o=2e4,r=100){o<=0?console.warn(`Timeout reached while waiting for condition: ${t.toString()}`):t&&t()?n():setTimeout((()=>{e(t,n,o-r,r)}),r)}((function(){return!!(window.location.href.includes("/collections/")&&document.querySelector(`body:not(.${e.page_initials}):not(${e.page_initials}--v${e.test_variation})`)&&document.querySelector(".collection__products-container #root"))}),(function(){console.table(e);const{page_initials:n,test_variation:o,test_version:r}=e;document.body.classList.add(n,`${n}--v${o}`,`${n}--version${r}`),t(),function(){const e=document.querySelector(".collection__products-container #root");new MutationObserver(((e,n)=>{t()})).observe(e,{childList:!0})}()}))})();
